#pragma once

#include <Arduino.h>

/*
 * ColorTemperatureService
 * -----------------------
 * Сервис цветовой температуры интерфейса.
 *
 * ЗАДАЧА:
 *  - единый источник "ощущения времени суток"
 *  - одинаково влияет на текст, иконки, вторичные элементы
 *
 * ВАЖНО:
 *  - НЕ рисует
 *  - НЕ знает про экраны
 *  - НЕ знает про ThemeService
 *  - НЕ знает про NightService
 *
 * Возвращает ГОТОВЫЕ цвета RGB565.
 *
 * Интеграция с ThemeService будет позже (через blend).
 */

// ============================================================================
// Color temperature modes
// ============================================================================
enum class ColorTemp : uint8_t {
    DAY = 0,        // нейтрально-белый
    EVENING,        // тёплый
    NIGHT           // очень тёплый, приглушённый
};

// ============================================================================
// Service
// ============================================================================
class ColorTemperatureService {
public:
    ColorTemperatureService();

    // ------------------------------------------------------------------------
    // control
    // ------------------------------------------------------------------------
    void set(ColorTemp t);
    ColorTemp current() const;

    // ------------------------------------------------------------------------
    // colors (RGB565)
    // ------------------------------------------------------------------------
    uint16_t text() const;        // основной текст
    uint16_t icon() const;        // иконки
    uint16_t secondary() const;   // вторичные элементы

private:
    ColorTemp _current;

    // ------------------------------------------------------------------------
    // helpers
    // ------------------------------------------------------------------------
    static uint16_t rgb565(uint8_t r, uint8_t g, uint8_t b);
};